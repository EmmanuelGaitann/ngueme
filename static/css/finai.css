/* FIN.AI — Styles globaux */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:        #f0f4fa;
  --surface:   #ffffff;
  --s2:        #f6f8fc;
  --border:    #e4eaf4;
  --ink:       #0f1c3f;
  --ink2:      #4a5578;
  --ink3:      #94a3c0;
  --sienna:    #c45c2a;
  --sienna-l:  #fdf0e8;
  --sienna-m:  #e8b090;
  --forest:    #1e6b48;
  --forest-l:  #e8f5ef;
  --indigo:    #2d3fa0;
  --indigo-l:  #eef0fb;
  --amber:     #b87020;
  --amber-l:   #fef5e4;
  --danger:    #c03030;
  --danger-l:  #fceaea;
  --sidebar-w: 72px;
}

html, body {
  font-family: 'Plus Jakarta Sans', sans-serif;
  font-size: 14px; color: var(--ink);
  background: var(--bg); height: 100vh;
}
.serif { font-family: 'Lora', serif; }

/* ── App layout ── */
.app-layout { display: flex; height: 100vh; overflow: hidden; }

/* ── Sidebar ── */
.sidebar {
  width: var(--sidebar-w); background: var(--ink);
  display: flex; flex-direction: column; align-items: center;
  padding: 18px 0; flex-shrink: 0;
}
.sidebar-logo {
  width: 42px; height: 42px; border-radius: 12px;
  background: var(--sienna);
  display: flex; align-items: center; justify-content: center;
  margin-bottom: 20px; font-size: 18px; color: #fff;
}
.sidebar-nav { display: flex; flex-direction: column; gap: 4px; flex: 1; }
.sidebar-bottom { display: flex; flex-direction: column; gap: 4px; }

.nav-icon {
  width: 44px; height: 44px; border-radius: 12px;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; color: rgba(255,255,255,.35);
  transition: .2s; font-size: 17px; text-decoration: none;
  position: relative;
}
.nav-icon:hover { background: rgba(255,255,255,.08); color: rgba(255,255,255,.75); }
.nav-icon.active { background: rgba(255,255,255,.12); color: #fff; }
.nav-icon.active::before {
  content: ''; position: absolute; left: 0; top: 50%;
  transform: translateY(-50%); width: 3px; height: 20px;
  background: var(--sienna); border-radius: 0 3px 3px 0;
}

/* ── Main area ── */
.main-area { flex: 1; display: flex; flex-direction: column; overflow: hidden; min-width: 0; }

/* ── Topbar ── */
.topbar {
  background: var(--surface); border-bottom: 1px solid var(--border);
  padding: 0 24px; height: 60px;
  display: flex; align-items: center; justify-content: space-between; flex-shrink: 0;
}
.topbar-title { font-size: 18px; font-weight: 700; line-height: 1; }
.topbar-sub   { font-size: 11px; color: var(--ink3); margin-top: 1px; }
.topbar-right { display: flex; align-items: center; gap: 10px; }

.live-badge {
  display: flex; align-items: center; gap: 5px;
  background: var(--forest-l); border: 1px solid #a8d4bc;
  border-radius: 99px; padding: 5px 11px;
  font-size: 10px; font-weight: 700; color: var(--forest); letter-spacing: .06em;
}
.live-dot {
  width: 6px; height: 6px; background: var(--forest); border-radius: 50%;
  display: inline-block; animation: blink 2.2s infinite;
}
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:.2} }

.icon-btn {
  width: 34px; height: 34px; border-radius: 9px;
  background: var(--s2); border: 1px solid var(--border);
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; color: var(--ink2); font-size: 13px;
}
.icon-btn:hover { background: var(--border); }

.avatar-chip {
  width: 34px; height: 34px; border-radius: 50%;
  background: var(--sienna);
  display: flex; align-items: center; justify-content: center;
  font-size: 12px; font-weight: 700; color: #fff; cursor: pointer;
}
.avatar-lg {
  width: 58px; height: 58px; border-radius: 50%;
  background: var(--sienna); margin: 0 auto;
  display: flex; align-items: center; justify-content: center;
  font-size: 20px; font-weight: 700; color: #fff;
  box-shadow: 0 4px 16px rgba(196,92,42,.3);
}

/* ── Main content ── */
.main-content { flex: 1; overflow-y: auto; padding: 20px 24px; }
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

/* ── Cards ── */
.card {
  background: var(--surface); border-radius: 16px;
  border: 1px solid var(--border);
  box-shadow: 0 2px 10px rgba(15,28,63,.05);
  padding: 18px;
}
.card-hero {
  background: linear-gradient(135deg, #0f1c3f 0%, #1e3068 100%);
  color: #fff; border: none;
}
.card-title { font-size: 13px; font-weight: 700; }
.card-header { display: flex; align-items: center; justify-content: space-between; }

/* ── Dashboard grid ── */
.dash-grid {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr 290px;
  grid-template-rows: auto auto auto;
  gap: 14px;
}
.dash-hero     { grid-column: 1 / 3; }
.dash-score    { grid-column: 3 / 4; }
.dash-profile  { grid-column: 4 / 5; grid-row: 1 / 4; }
.dash-income   { grid-column: 1 / 2; }
.dash-expense  { grid-column: 2 / 3; }
.dash-leaks    { grid-column: 3 / 4; }
.dash-capacity { grid-column: 1 / 3; }

/* ── Hero card ── */
.card-hero-bg {
  position: absolute; inset: 0; overflow: hidden; border-radius: 16px; pointer-events: none;
}
.hero-amount { font-size: 38px; font-weight: 700; line-height: 1.1; margin: 6px 0 10px; }
.hero-currency { font-size: 16px; opacity: .4; font-weight: 400; }
.hero-sparkline { height: 60px; margin: 10px 0; }
.hero-footer { display: flex; gap: 0; padding-top: 12px; border-top: 1px solid rgba(255,255,255,.1); }
.hero-stat { flex: 1; }
.hero-stat-val { font-size: 16px; font-weight: 700; margin-top: 3px; }
.hero-sep { width: 1px; background: rgba(255,255,255,.1); margin: 0 12px; }

/* ── Score ── */
.score-arc-wrap { position: relative; width: 90px; height: 90px; flex-shrink: 0; }
.score-center {
  position: absolute; inset: 0;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
}
.score-num   { font-size: 22px; font-weight: 700; line-height: 1; }
.score-denom { font-size: 9px; color: var(--ink3); font-weight: 700; }
.grade-row   { display: flex; justify-content: space-between; align-items: center; padding: 4px 0; border-bottom: 1px solid var(--s2); }
.grade-label { font-size: 11px; color: var(--ink3); }
.grade       { font-size: 12px; font-weight: 800; }
.grade-green { color: var(--forest); }
.grade-amber { color: var(--amber); }
.grade-red   { color: var(--danger); }

/* ── Profile panel ── */
.profile-head { text-align: center; padding-bottom: 14px; border-bottom: 1px solid var(--s2); margin-bottom: 12px; }
.tx-list-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; }

/* ── Transactions ── */
.tx-row { display: flex; align-items: center; justify-content: space-between; padding: 9px 0; }
.tx-row + .tx-row { border-top: 1px solid var(--s2); }
.tx-icon {
  width: 32px; height: 32px; border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0; font-size: 12px;
}

/* ── Category colors ── */
.ci-logement       { background:#eef0fb; color:#2d3fa0; }
.ci-alimentation   { background:#fdf0e8; color:#c45c2a; }
.ci-transport      { background:#fef5e4; color:#b87020; }
.ci-business       { background:#e8f5ef; color:#1e6b48; }
.ci-telecom        { background:#e0f6fb; color:#0891b2; }
.ci-sante          { background:#fce8ec; color:#b83060; }
.ci-formation      { background:#fef5e4; color:#b87020; }
.ci-investissement { background:#e8f5ef; color:#1e6b48; }
.ci-divers         { background:#f6f8fc; color:#4a5578; }

/* ── Chips ── */
.chip { display:inline-flex;align-items:center;gap:4px;padding:3px 9px;border-radius:99px;font-size:11px;font-weight:700;letter-spacing:.02em; }
.chip-green  { background:var(--forest-l); color:var(--forest); }
.chip-amber  { background:var(--amber-l);  color:var(--amber); }
.chip-red    { background:var(--danger-l); color:var(--danger); }
.chip-sienna { background:var(--sienna-l); color:var(--sienna); }
.chip-indigo { background:var(--indigo-l); color:var(--indigo); }

/* ── Progress ── */
.bar-track { background:var(--s2); border-radius:99px; height:6px; overflow:hidden; }
.bar-fill  { height:100%; border-radius:99px; transition:width 1.3s cubic-bezier(.22,1,.36,1); }

/* ── Inputs / Buttons ── */
.fin-input {
  width:100%; background:var(--s2); border:1.5px solid var(--border);
  border-radius:10px; padding:9px 12px;
  font-family:'Plus Jakarta Sans',sans-serif; font-size:13px; color:var(--ink);
  outline:none; transition:.2s;
}
.fin-input:focus { border-color:var(--indigo); box-shadow:0 0 0 3px rgba(45,63,160,.08); }
.fin-input::placeholder { color:var(--ink3); }
select.fin-input { cursor:pointer; }

.btn-primary {
  width:100%; padding:12px; border:none; border-radius:11px;
  font-family:'Plus Jakarta Sans',sans-serif; font-size:14px; font-weight:700;
  cursor:pointer; transition:.15s;
}
.btn-primary:active { transform:scale(.98); }
.btn-sienna { background:var(--sienna); color:#fff; box-shadow:0 4px 14px rgba(196,92,42,.25); }
.btn-forest { background:var(--forest); color:#fff; box-shadow:0 4px 14px rgba(30,107,72,.2); }
.btn-ink    { background:var(--ink);    color:#fff; box-shadow:0 4px 14px rgba(15,28,63,.2); }

.link-accent { color:var(--sienna); text-decoration:none; font-weight:700; font-size:12px; cursor:pointer; background:none; border:none; }
.link-accent:hover { text-decoration:underline; }

.field-label { font-size:10px;font-weight:700;color:var(--ink3);letter-spacing:.05em;display:block;margin-bottom:5px; }
.label-xs    { font-size:10px;letter-spacing:.07em;font-weight:700;color:var(--ink3); }

/* ── Toast ── */
.toast {
  position:fixed; bottom:20px; right:20px;
  background:var(--ink); color:#fff;
  padding:9px 16px; border-radius:12px;
  font-size:13px; font-weight:600; z-index:9999;
  transform:translateY(80px); opacity:0;
  transition:.3s; display:flex; align-items:center; gap:8px;
}
.toast.show { transform:translateY(0); opacity:1; }

/* ── Chart ── */
.chart-box { position:relative; }

/* ── Auth pages ── */
.auth-layout {
  display: flex; height: 100vh; overflow: hidden;
}
.auth-brand {
  width: 420px; flex-shrink: 0;
  background: linear-gradient(160deg, #0f1c3f 0%, #1e3068 60%, #1e3a50 100%);
  display: flex; align-items: center; justify-content: center;
}
.auth-brand-inner { padding: 40px; }
.auth-form-panel {
  flex: 1; display: flex; align-items: center; justify-content: center;
  background: var(--bg);
}
.auth-form-inner { width: 100%; max-width: 420px; padding: 20px; }

/* ── Mobile Bottom Nav (desktop template, ≤768px) ── */
.mobile-bottom-nav { display: none; }
.mobile-nav-btn {
  flex: 1; display: flex; flex-direction: column; align-items: center; gap: 3px;
  padding: 9px 4px; font-size: 10px; font-weight: 700; color: var(--ink3);
  letter-spacing: .03em; font-family: 'Plus Jakarta Sans', sans-serif;
  text-decoration: none; -webkit-tap-highlight-color: transparent;
  transition: color .2s; position: relative;
}
.mobile-nav-btn i { font-size: 18px; }
.mobile-nav-btn.active { color: var(--sienna); }

/* ── Responsive mobile (≤768px) ── */
@media (max-width: 768px) {

  /* Libérer le scroll vertical */
  html, body { height: auto; overflow: auto; }
  .app-layout { height: auto; overflow: visible; flex-direction: column; }

  /* Masquer la sidebar latérale */
  .sidebar { display: none; }

  /* Zone principale occupe toute la largeur */
  .main-area { overflow: visible; }

  /* Topbar compact */
  .topbar { padding: 0 14px; height: 52px; }
  .topbar-title { font-size: 15px; }
  .live-badge span:last-child { display: none; }

  /* Contenu avec padding bottom pour la nav mobile */
  .main-content {
    padding: 14px 14px 80px;
    overflow: visible;
  }

  /* Auth pages : masquer le panneau gauche */
  .auth-layout { flex-direction: column; height: auto; overflow: auto; }
  .auth-brand { display: none; }
  .auth-form-panel { align-items: flex-start; padding-top: 24px; }
  .auth-form-inner { padding: 16px; }

  /* Dashboard grid → colonne unique */
  .dash-grid {
    grid-template-columns: 1fr;
    grid-template-rows: auto;
  }
  .dash-hero, .dash-score, .dash-profile,
  .dash-income, .dash-expense, .dash-leaks, .dash-capacity {
    grid-column: 1 / 2;
    grid-row: auto;
  }

  /* Toast au-dessus de la nav mobile */
  .toast { bottom: 80px; right: 12px; }

  /* Nav mobile visible */
  .mobile-bottom-nav {
    display: flex;
    position: fixed; bottom: 0; left: 0; right: 0; z-index: 90;
    background: rgba(255,255,255,.96); backdrop-filter: blur(14px);
    border-top: 1px solid var(--border);
    padding-bottom: env(safe-area-inset-bottom, 0);
  }
}
